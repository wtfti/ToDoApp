!function(e,t,o){"use strict";var n=e.signalR,r=e.signalR.events,c=e.signalR.changeState,s=n.transports._logic;n.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,o){var c=s.stringifySend(t,o);try{t.socket.send(c)}catch(c){e(t).triggerHandler(r.onError,[n._.transportError(n.resources.webSocketsInvalidState,t.transport,c,t.socket),o])}},start:function(o,a,i){var l,g=!1,d=this,k=!a,u=e(o);return t.WebSocket?void(o.socket||(l=o.webSocketServerUrl?o.webSocketServerUrl:o.wsProtocol+o.host,l+=s.getUrl(o,this.name,k),o.log("Connecting to websocket endpoint '"+l+"'."),o.socket=new t.WebSocket(l),o.socket.onopen=function(){g=!0,o.log("Websocket opened."),s.clearReconnectTimeout(o),c(o,n.connectionState.reconnecting,n.connectionState.connected)===!0&&u.triggerHandler(r.onReconnect)},o.socket.onclose=function(t){var c;this===o.socket&&(g&&"undefined"!=typeof t.wasClean&&t.wasClean===!1?(c=n._.transportError(n.resources.webSocketClosed,o.transport,t),o.log("Unclean disconnect from websocket: "+(t.reason||"[no reason given]."))):o.log("Websocket closed."),i&&i(c)||(c&&e(o).triggerHandler(r.onError,[c]),d.reconnect(o)))},o.socket.onmessage=function(t){var n;try{n=o._parseResponse(t.data)}catch(e){return void s.handleParseFailure(o,t.data,e,i,t)}n&&(e.isEmptyObject(n)||n.M?s.processMessages(o,n,a):s.triggerReceived(o,n))})):void i()},reconnect:function(e){s.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},stop:function(e){s.clearReconnectTimeout(e),e.socket&&(e.log("Closing the Websocket."),e.socket.close(),e.socket=null)},abort:function(e,t){s.ajaxAbort(e,t)}}}(window.jQuery,window);